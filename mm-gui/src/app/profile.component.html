<div *ngIf= "!chatMode" (mousemove)="onMove()">
    <div class = "profile">
        <div class = "profile-item short block one">
            <div *ngIf= "!editProfileMode">
                <button class = "button"  (click) = "editProfileMode = true">edit profile</button> 
                <button class = "button" (click) = "chatMode = true">enterForum</button>
            </div>
            <div *ngIf= "editProfileMode">
                <button class = "button"  (click) = "editProfileMode = false; updateMusician(musician)">accept changes</button>
            </div>
            <div *ngIf = "!editProfileMode"> 
                <br>
                {{ musician.name }}
                <br>
            </div>
            <div *ngIf="editProfileMode">
                <br>
                name:<input [(ngModel)] = "musician.name">
            </div>
        </div>
    
        
        <div class = "profile-item short block two" >
            Events:
            <div *ngIf = "editProfileMode">
                <div>
                    <button class = "button" (click) = "newEvent()">create event</button>
                </div>
                <div *ngIf = "editProfileMode">
                    <table *ngFor = "let e of musician.events">
                        <tr>
                            <td>
                                event name:
                            </td>
                            <td>
                                <input [(ngModel)] = "e.name" >
                            </td>
                        </tr>
                        <tr>
                            <td>
                                event date:
                                <br>
                            </td>
                            <td>
                                <input [(ngModel)] = "e.date" >
                            </td>
                        </tr>
                        <tr>
                            <td>
                                event bands:
                                <br>
                            </td>
                            <td>
                                <input [(ngModel)] = "e.bands" >
                            </td>
                        </tr>
                        <tr>
                            <td>
                            </td>
                            <button class = "button" (click) = "createEvent(e)">accept</button>
                            <td>
                            </td>
                        </tr>
                        <tr>
                        </tr>
                        
                    </table>
                    <div *ngIf = "duplicatedeventname">
                        Esse evento ja existe!
                    </div>
                </div>
            </div>
            <div *ngIf = "!editProfileMode">
                <table *ngFor = "let e of musician.events">
                        <tr>
                            <td>
                                event name:
                            </td>
                            <td>
                                {{e.name}}
                            </td>
                        </tr>
                        <tr>
                            <td>
                                event date:
                            </td>
                            <td>
                                {{e.date}}
                            </td>
                        </tr>
                        <tr>
                            <td>
                                event bands:
                            </td>
                            <td>
                                {{e.bands}}
                            </td>
                        </tr>
                        <tr>
                            <td>
                            </td>
                            <td>
                            </td>
                        </tr>
                        <tr>
                        </tr>
                </table>
            </div>
        </div>
        <div class = "profile-item long block three">
            <table class = "info" *ngIf = "!editProfileMode">
                <tr>
                    <td>email:</td><td>bands:</td>
                </tr>
                <tr>
                    <td>{{musician.email}}</td>
                        <table>
                            <tr *ngFor="let b of musician.bands">
                                {{ b.name }}</tr>
                        </table>
                </tr>
                
                <tr>
                    <td>instruments:</td><td>repertoire:</td>
                </tr>
                <tr>
                    <td>
                        <table>
                            <tr *ngFor = "let i of musician.instruments">
                                {{ i.name }}
                            </tr>
                        </table>
                    </td>
                    <td>
                        <table>
                            <tr *ngFor = "let r of musician.repertoire">
                                {{ r.name }}
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
    
            <table class = "info" *ngIf = "editProfileMode">
                <tr>
                    <td>email:</td><td>bands:</td>
                </tr>
                <tr>
                    <td><input [(ngModel)] = "musician.email"></td>
                    <table>
                        <tr *ngFor = "let b of musician.bands">
                            <input [(ngModel)] = "b.name">
                        </tr>
                    </table>
                </tr>
                <tr>
                    <td></td>
                    <td> <button class = "button" (click) = "newBand()">add</button></td>
                </tr>
                <tr>
                    <td>instruments:</td><td>repertoire:</td>
                </tr>
                <tr>
                    <td>
                        <table>
                            <tr *ngFor = "let i of musician.instruments">
                                <input [(ngModel)] = "i.name">
                            </tr>
                        </table>
                    </td>
                    <td>
                        <table>
                            <tr *ngFor = "let r of musician.repertoire">
                                <input [(ngModel)] = "r.name">
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr>
                </tr>
                <tr>
                    <td> <button class = "button" (click) = "newInstrument()">add</button></td>
                    <td> <button class = "button" (click) = "newSong()">add</button></td>
                </tr>
            </table> 
        </div>
    </div>
</div>
<div *ngIf = "chatMode"> 
    <div>
        <button class = "buttonBack" (click) = "chatMode = false">back</button>
        <br>
    </div>
    <div>
        <input [(ngModel)] = message.text>
        <button class = "button" (click) = "sendMessage();">send</button>
    </div>
    <div *ngFor= "let m of messages">
        <br>
        {{ m.sender }} : {{ m.text }}
    </div>
   
</div>
